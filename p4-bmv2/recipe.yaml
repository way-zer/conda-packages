# yaml-language-server: $schema=https://cdn.jsdelivr.net/gh/prefix-dev/recipe-format@main/schema.json
context:
  commit: ec328ab87fe10cea0e061a4d9eb15408fb49729a

package:
  name: p4-bmv2
  version: 0.1.dev+${{ commit }}

build:
  number: 1
  script: build.sh

source:
- git: https://github.com/p4lang/behavioral-model
  rev: ${{ commit }}
- git: https://github.com/p4lang/PI
  target_directory: pi

requirements:
  host:
    - python=3.9
    - libevent
    - libopenssl-static
    - thrift-cpp
    # - nanomsg # deepvision/nanomsg
    - gmp
    - libboost-devel
    - libpcap
    - libevent
    - grpc-cpp
  build:
    - automake
    - cmake
    - make
    - libtool
    - flex
    - bison
    - ${{ compiler('cxx') }}
    - protobuf
    - pkg-config
